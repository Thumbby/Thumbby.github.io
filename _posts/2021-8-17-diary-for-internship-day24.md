---
layout: post
title:  "实习日记24(面试问的问题+开发遇到的问题)"
date:   2021-08-17
categories: jekyll update
---

## Day24

- 昨晚面试的时候问到的，关于**循环展开**是否有了解

  **循环展开**是一种牺牲程序的尺寸来加快程序的执行速度的优化方法。可以由程序员完成，也可由编译器自动优化完成。

  循环展开最常用来降低循环开销，为具有多个功能单元的处理器提供指令级并行。也有利于指令流水线的调度。

  **优点**：由于展开能够消除分支以及一些管理归纳变量的代码，因此可以摊销一些分支开销。

  ​			展开可以积极调度（或管道化）循环以掩盖一些延迟。如果有足够的空闲寄存器使变量保持活动状态，因为通过展开相关性链展露了关键路径，这将非常有用。

  ​			如果迭代次数是可预测的，并且循环中没有条件分支，则英特尔(R) 奔腾(R) 4 处理器可以正确预测迭代次数为 16 次或更少的内部循环的退出分支。因此，如果循环体不是太大，并且已知可探测的迭代次数，则可以展开内部循环，直到它们的迭代次数达到最大值 16。对于奔腾 III 或奔腾 II 处理器，请不要展开迭代次数大于 4 的循环。

  **开销**：通常增加程序代码大小可能是不合需要的，特别是对于嵌入式应用程序。 也可能导致指令缓存未命中增加，这可能会对性能产生负面影响。

  ​			除非优化编译器透明地执行，否则代码可能会变得不那么可读。

  ​			如果循环体中的代码涉及函数调用，则可能无法将展开与内联组合，因为代码大小的增加可能过多。 因此，可以在两个优化之间进行权衡。

  ​			在单次迭代中可能增加寄存器使用以存储临时变量，这可能会降低性能，尽管很大程度上取决于可能的优化。

  ​			除了非常小而简单的代码之外，包含分支的展开循环甚至比递归更慢。

- 今天修改一个bug时遇到的问题

  **场景**：某个请求中调用了一个获取数据返回一个字符串的方法，然后抛出了空指针异常，设置断点查看源码后发现没有进行非空判断，增加了判断之后解决。

  **解决方法**：增加判断是否为空解决方案，即

  ```java
  if(str == null)
  ```

  **坑**：需要注意的是要根据业务场景选择null,""和isEmpty()三种进行判断，下面简述三种方法之间的区别：

  - null：未分配内存空间，无值，是一种无值(值不存在)，只能分辨出值是否不分配内存空间
  - ""： 分配了内存空间，值为空字符串，是相对的空，是一种有值(值 = 空字串)，不管值是否分配内存空间都不会报错
  - isEmpty()：分配了内存空间，值为空，是绝对的空，是一种有值(值 = 空)，如果不分配内存空间，不能用isEmpty(),否则报空指针异常，且不能分辨出值是空还是空字符串

- 明天会参与第一次发版流程，今天摸了